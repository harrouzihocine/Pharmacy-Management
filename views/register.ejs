<% layout('layouts/boilerplate')%>

<div class="register-container">
  <h1 class="text-reg-page"><img src="/assets/logo.png" alt="" width="120px"> User Registration</h1>

  <!-- Error message display -->
  <div class="error-message" id="error-message"></div>

  <form action="/register" method="POST">
    <div class="form-group">
      <label for="username">Username:</label>
      <input type="text" id="username" name="username" class="custom-input-register" required placeholder="Enter your username">
    </div>

    <div class="form-group">
      <label for="password">Password:</label>
      <input type="password" id="password" name="password" class="custom-input-register" required placeholder="Enter your password">
    </div>

    <div class="form-group">
      <label for="role">Role:</label>
      <select id="role" name="role" class="custom-select-register" required>
        <option value="">Select Role</option>
        <option value="Pharmacien Principal">Pharmacien Principal</option>
        <option value="Acheteur">Acheteur</option>
        <option value="Responsable Service">Responsable Service</option>
        <option value="Admin">Admin</option>
      </select>
    </div>

  <!-- Multi-Select for Services -->
  <div class="form-group mb-3">
    <label for="services">Services:</label>
    <select id="services" name="services[]" class="custom-select-register" multiple>
      <% services.forEach(service => { %>
        <option value="<%= service._id %>"><%= service.name %></option>
      <% }) %>
    </select>
  </div>

    <button type="submit" class="custom-btn-register">Register</button>
  </form>

  <p class="footer-text-register">Already have an account? <a href="/login">Login here</a></p>
</div>

<!-- Choices.js Integration -->

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const multiSelect = new Choices('#services', {
      removeItemButton: true, // Allow removing selected options
      placeholder: true,
      placeholderValue: 'Select services...',
    });
  });
</script>
